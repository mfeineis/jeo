"use strict";var _slicedToArray=function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r)){for(var n,t=[],i=r[Symbol.iterator]();!(n=i.next()).done&&(t.push(n.value),!e||t.length!==e););return t}throw new TypeError("Invalid attempt to destructure non-iterable instance")};/*! jeo v0.2.1 (c) 2015 Martin Feineis, MIT license (https://www.github.com/mfeineis/jeo) */
!function(r,e,n){"undefined"!=typeof define&&define.amd?define([],n):"undefined"!=typeof module?module.exports=n():r[e]=n()}((0,eval)("this"),"jeo",function(){function r(r){var e=void 0===arguments[1]?{}:arguments[1];return N(e).forEach(function(n){r[n]=e[n]}),r}function e(r){var e=void 0===arguments[1]?"An assertion failed.":arguments[1];if(!r)throw new Error(e)}function n(r){var e=void 0===arguments[1]?"A precondition has been violated.":arguments[1];if(!r)throw new Error(e)}function t(r){n.toBeDefined(r,"No descriptor specified."),n.not.toBeNull(r,"A descriptor can not be null.");var e=q.call(r,"constructor")?r.constructor:function(){},t=e.length;if("function"!=typeof e)throw new Error('"constructor" must be a function.');var i=q.call(r,"requires"),o=i?Array.isArray(r.requires)?r.requires:[r.requires]:[],a=o.length;if(0===t&&a>0)throw new Error('"requires" is not allowed to provide dependencies when the constructor doesn\'t require any');if(t!==a)throw new Error('"requires" has to provide the same amount of dependencies that the constructor declares ('+JSON.stringify(r)+")");return o.forEach(function(r){if(!p(r))throw new Error('"'+JSON.stringify(r)+'" is not a valid trait')}),{constructor:e,requires:o}}function i(r){var e=q.call(r,"is"),n=e?Array.isArray(r.is)?r.is:[r.is]:[];return n.forEach(function(r){if(!p(r))throw new Error('"'+JSON.stringify(r)+'" is not a valid trait')}),{traits:n}}function o(r){var e=q.call(r,"main"),n=e?r.main:function(){};if("function"!=typeof n)throw new Error('"main", if provided has to be a function.');return{main:n}}function a(){}function u(r){return r instanceof a}function c(r){var e=q.call(r,"public"),n=e?r["public"]:{};if("object"!=typeof n)throw new Error('"public" has to be an object.');return N(n).forEach(function(r){var e=n[r];if(!u(e)&&"function"!=typeof e)throw new Error('"public" can only contain functions or  "required" declarations ('+JSON.stringify(n)+")");n[r]={member:e,publicName:r,privateName:r}}),{publicMembers:n}}function f(r){var e=q.call(r,"private"),n=e?r["private"]:{};if("object"!=typeof n)throw new Error('"private" has to be an object.');return N(n).forEach(function(r){if("function"!=typeof n[r])throw new Error('"private" can only contain functions ('+JSON.stringify(n)+")")}),{privateMembers:n}}function s(r){return function(e){return e===j?r:void 0}}function l(r){return"function"==typeof r[O]?r[O](j):void 0}function p(r){if(!r)throw new Error('Argument to "isTrait" can not be null or undefined.');return"function"==typeof r[O]?!!l(r):!1}function m(r,e){var n=E(r),t=n["public"]={},i={};return N(r["public"]).forEach(function(n){i[n]=!0;var o=r["public"][n],a=o.member,c=o.publicName,f=o.privateName,s=q.call(e,n),l=e[n];if(s){if(u(a))throw new Error('Can not resolve required member "'+n+'".');if(null===l){if(null===c)throw new Error('No public member "'+n+'" found');return void(t[n]={member:a,publicName:null,privateName:f})}if("string"==typeof l)return void(t[l]={member:a,publicName:l,privateName:f})}else t[n]={member:a,publicName:c,privateName:f}}),N(e).forEach(function(e){if(!q.call(i,e))throw new Error('"'+e+'" can not be resolved because it is not a public method on '+JSON.stringify(r))}),n}function d(r){var e={resolve:function(e){return d(m(r,e))}};return e.create=y(e),e[O]=s(r),g(e)}function v(r){var e=l(r)["public"],n=N(e).map(function(r){return e[r].publicName}).filter(function(r){return null!==r});return n.sort(),n.join("#")}function h(r,e){return r.contexts=[],function(n){var t=e["for"].filter(function(r){return r.trait===n}),i=_slicedToArray(t,1),o=i[0];if(o){var a=v(o.use),c=v(n);if(c!==a)throw new Error('Substitute hash "'+a+'" does not match the hash "'+c+'" of the trait to be substituted');n=o.use}var f=l(n),s=f["public"],p=f["private"],m=f.requires.map(function(r){return b(r,e)}),d={};r.contexts.push(d),f.constructor.apply(d,m),N(p).forEach(function(r){var e=p[r];if(u(e))throw new Error("Private members can not be required");if(q.call(d,r))throw new Error('Can not overwrite member "'+r+'" which has previously been defined');d[r]=function(){return e.apply(d,arguments)}}),N(s).forEach(function(e){var n=s[e],t=n.member,i=n.publicName,o=n.privateName;if(q.call(d,o))throw new Error('Can not overwrite member "'+e+'" which has previously been defined');var a=u(t),c=function(){return t.apply(d,arguments)},f=q.call(r,i),l=f&&u(r[i]),p=f&&!u(r[i]);if(a&&l);else if(a&&p);else if(a&&!f)r[i]=t;else{if(a||!l&&f)throw new Error("Unknown composition pattern");d[o]=c,null!==i&&(r[i]=c)}})}}function b(r,e){if(!p(r))throw new Error('The argument "'+JSON.stringify(r)+'" is not a trait and therefore can not be instantiated.');var n=l(r),t={},i=[r].concat(n.is),o=h(t,e);return i.forEach(o),N(t).forEach(function(r){var e=t[r];if(u(e))throw new Error('Can not instantiate incomplete trait. The member "'+r+'" is still required.')}),t}function w(r){for(var e=arguments,n=!0;n;){n=!1;var a=r;A=u=s=l=m=v=h=y=E=g=N=q=void 0;{if(!(e.length>1)){"function"==typeof a&&(a=a(b(w.Util,w.config)));var u=t(a),s=u.constructor,l=u.requires,m=i(a),v=m.traits,h=o(a),y=h.main,E=c(a),g=E.publicMembers,N=f(a),q=N.privateMembers;return d({is:v,requires:l,constructor:s,main:y,"public":g,"private":q})}var A=[].slice.call(e).map(function(r){if(!r)throw new Error("A top level argument can not be falsy");return p(r)?r:w({"public":r})});e=[r={is:A}],n=!0}}}function y(e){return function(){var n=void 0===arguments[0]?{}:arguments[0],t=r(w.config,n);return t["for"].forEach(function(r){if(!p(r.trait))throw new Error("Invalid configured dependency");if(!p(r.use))throw new Error("Invalid substituted dependency configured")}),b(e,t)}}var E=Object.create,g=Object.freeze,N=Object.keys,q={}.hasOwnProperty;n.not={};var A={toBeDefined:function(r){return"undefined"!=typeof r},toBeNull:function(r){return null===r}};N(A).forEach(function(r){n[r]=function(r){return function(e,t){var i=r.apply(void 0,arguments);n(i,t)}}(A[r]),n.not[r]=function(r){return function(e,t){var i=!r.apply(void 0,arguments);n(i,t)}}(A[r])});var O="__jeo_trait"+Math.round(1e9*Math.random()),j={isTrait:!0};return{trait:g(r(w,{Util:w({"public":{assert:e,log:function(){console.log.apply(console,arguments)},mix:r,requires:n}}),config:{"for":[]},isTrait:p,required:g(new a)}))}});
//# sourceMappingURL=jeo.js.map